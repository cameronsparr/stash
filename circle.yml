dependencies:
  post:
    # install golint
    - go get github.com/golang/lint/golint
    # install gocyclo
    - go get github.com/fzipp/gocyclo
    # install binaries
    - go install ./...

test:
  pre:
    # Verify that all files are go formatted:
    - "[ `git ls-files | grep '.go$' | xargs gofmt -l 2>&1 | wc -l` -eq 0 ]"
    # Vet and lint:
    - go vet ./...
    - golint ./...
  override:
    # Run unit tests
    - go test -v -race ./...
  post:
    # Test that complexity of a single function isnt over 15
    - gocyclo -over 15 .
    # Test that the stash binary basically runs:
    - /home/ubuntu/.go_project/bin/stash destination list
